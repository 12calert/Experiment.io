<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Non-Intersecting Shapes</title>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        class Shape {
            constructor(x, y) {
                this.x = x;
                this.y = y;
            }

            intersects(other) {
                return false;
            }
        }

        class Circle extends Shape {
            constructor(x, y, radius) {
                super(x, y);
                this.radius = radius;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.stroke();
            }

            intersects(other) {
                if (other instanceof Circle) {
                    const dx = this.x - other.x;
                    const dy = this.y - other.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    return distance < (this.radius + other.radius);
                } else if (other instanceof Rectangle) {
                    const deltaX = this.x - Math.max(other.x, Math.min(this.x, other.x + other.width));
                    const deltaY = this.y - Math.max(other.y, Math.min(this.y, other.y + other.height));

                    return (deltaX * deltaX + deltaY * deltaY) < (this.radius * this.radius);
                } else if (other instanceof Triangle) {
                    return other.intersects(this);
                }
            }
        }

        class Rectangle extends Shape {
    constructor(x, y, width, height) {
        super(x, y);
        this.width = width;
        this.height = height;
    }

    draw() {
        ctx.strokeRect(this.x, this.y, this.width, this.height);
    }

    containsPoint(x, y) {
        return (
            x >= this.x &&
            x <= this.x + this.width &&
            y >= this.y &&
            y <= this.y + this.height
        );
    }

    intersects(other) {
        if (other instanceof Rectangle) {
            return (
                this.x < other.x + other.width &&
                this.x + this.width > other.x &&
                this.y < other.y + other.height &&
                this.y + this.height > other.y
            );
        } else if (other instanceof Triangle) {
            return other.intersects(this);
        } else if (other instanceof Circle) {
            return other.intersects(this);
        }
    }
}


        class Triangle extends Shape {
            constructor(x1, y1, x2, y2, x3, y3) {
                super(0, 0);
                this.points = [
                    { x: x1, y: y1 },
                    { x: x2, y: y2 },
                    { x: x3, y: y3 },
                ];
            }

            draw() {
                ctx.beginPath();
                ctx.moveTo(this.points[0].x, this.points[0].y);
                ctx.lineTo(this.points[1].x, this.points[1].y);
                ctx.lineTo(this.points[2].x, this.points[2].y);
                ctx.closePath();
                ctx.stroke();
            }


            containsPoint(x, y) {
                const area = (this.points[0].x * (this.points[1].y - this.points[2].y) +
                             this.points[1].x * (this.points[2].y - this.points[0].y) +
                             this.points[2].x * (this.points[0].y - this.points[1].y)) / 2;
                const s = 1 / (2 * area) * (this.points[0].y * this.points[2].x - this.points[0].x * this.points[2].y + (this.points[2].y - this.points[0].y) * x + (this.points[0].x - this.points[2].x) * y);
                const t = 1 / (2 * area) * (this.points[0].x * this.points[1].y - this.points[0].y * this.points[1].x + (this.points[0].y - this.points[1].y) * x + (this.points[1].x - this.points[0].x) * y);

                return s > 0 && t > 0 && 1 - s - t > 0;
            }

            intersects(other) {
                if (other instanceof Circle) {
                    for (let i = 0; i < this.points.length; i++) {
                        const p1 = this.points[i];
                        const p2 = this.points[(i + 1) % this.points.length];
                        const dx = p2.x - p1.x;
                        const dy = p2.y - p1.y;
                        const d = Math.sqrt(dx * dx + dy * dy);
                        const nx = -dy / d;
                        const ny = dx / d;
                        const cx = other.x + nx * other.radius;
                        const cy = other.y + ny * other.radius;
                        const inside = this.containsPoint(cx, cy);

                        if (inside) {
                            return true;
                        }
                    }

                    return false;
                } else if (other instanceof Rectangle) {
        for (let i = 0; i < this.points.length; i++) {
            const p1 = this.points[i];
            const p2 = this.points[(i + 1) % this.points.length];

            if (other.containsPoint(p1.x, p1.y) || other.containsPoint(p2.x, p2.y)) {
                return true;
            }
        }

        for (let x = other.x; x <= other.x + other.width; x++) {
            for (let y = other.y; y <= other.y + other.height; y++) {
                if (this.containsPoint(x, y)) {
                    return true;
                }
            }
        }

        return false;} else if (other instanceof Triangle) {
                    for (let i = 0; i < this.points.length; i++) {
                        if (other.containsPoint(this.points[i].x, this.points[i].y)) {
                            return true;
                        }
                    }

                    return false;
                }
                
            }
            
        }
        
 function generateRandomShape(shapes, maxAttempts = 100) {
            let attempts = 0;
            while (attempts < maxAttempts) {
                const shapeType = Math.floor(Math.random() * 3);
                let shape;
         
             

            switch (shapeType) {
                case 0: // Circle
                    const radius = Math.floor(Math.random() * 20) + 10;
                    const x = Math.floor(Math.random() * (canvas.width - 2 * radius) + radius);
                    const y = Math.floor(Math.random() * (canvas.height - 2 * radius) + radius);
                    shape = new Circle(x, y, radius);
                    break;
                case 1: // Rectangle
                    const width = Math.floor(Math.random() * 50) + 20;
                    const height = Math.floor(Math.random() * 50) + 20;
                    const xR = Math.floor(Math.random() * (canvas.width - width));
                    const yR = Math.floor(Math.random() * (canvas.height - height));
                    shape = new Rectangle(xR, yR, width, height);
                   
                break;
            case 2: // Triangle
                const centerX = Math.floor(Math.random() * (canvas.width - 60)) + 30;
                const centerY = Math.floor(Math.random() * (canvas.height - 60)) + 30;
                const angle1 = Math.random() * 2 * Math.PI;
                const angle2 = angle1 + 2 * Math.PI / 3;
                const angle3 = angle1 + 4 * Math.PI / 3;
                const size = Math.floor(Math.random() * 30) + 20;
                const x1 = centerX + size * Math.cos(angle1);
                const y1 = centerY + size * Math.sin(angle1);
                const x2 = centerX + size * Math.cos(angle2);
                const y2 = centerY + size * Math.sin(angle2);
                const x3 = centerX + size * Math.cos(angle3);
                const y3 = centerY + size * Math.sin(angle3);
                shape = new Triangle(x1, y1, x2, y2, x3, y3);
                break;
        }

        let hasIntersection = false;
        for (const otherShape of shapes) {
            if (shape.intersects(otherShape)) {
                hasIntersection = true;
                break;
            }
        }

        if (!hasIntersection) {
            return shape;
        }

        attempts++;
    }
    return null}
  function drawRandomShapes(numShapes) {
            const shapes = [];

            let generatedShapes = 0;
            while (generatedShapes < numShapes) {
                const shape = generateRandomShape(shapes);
                if (shape !== null) {
                    shapes.push(shape);
                    shape.draw();
                    generatedShapes++;
                }
            }
        }

        drawRandomShapes(30);
</script>
</body></html>